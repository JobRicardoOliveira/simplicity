<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Fale Conosco - Simplicity</title>

<!-- Inserindo Favicon -->
<link rel="shortcut icon" href="imagens/favicon.png" type="image/x-icon">

<!-- Inserindo tags meta -->
<meta name="description" content="Entre em contato com nossos consultores.">
<meta name="keywords" content="contato">

<!-- CSS externo -->
<link rel="stylesheet" href="css/estilos.css">

</head>
<body>

    <!-- cabeçalho/topo -->
    <header>
        <div class="limitador">
            <h1><a href="index.html">Simplicity</a></h1>
            
            <nav>
                <h2>
                    <a href="" class="icone">
                        Menu &equiv; 
                    </a>
                </h2>
                <ul class="menu">
                    <li><a href="index.html" title="página inicial">Home</a></li>
                    <li><a href="produtos.html" title="conheça nossos produtos">Produtos</a></li>
                    <li><a href="servicos.html" title="da criação de site a loja virtual, conheça nossos serviços">Serviços</a></li>
                    <li><a href="contato.html" title="fale com a equipe Simplicity">Contato</a></li>
                </ul>
            </nav>        
        </div>
    </header> <!-- /fim header -->                           

    <!-- conteúdo -->
    <main>

        <article class="limitadir conteudo">

        <h2>Contato</h2>

        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Deserunt fugit assumenda dignissimos nostrum sequi quis unde beatae, et laboriosam optio a maxime qui libero officiis quos tenetur rerum repellat sit.</p>

        <p>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Modi enim dicta dolor voluptates, earum dignissimos magni repellendus, reprehenderit excepturi iusto repellat odio veritatis quo. Quae debitis amet ducimus sit nesciunt!</p>

        <!-- Iniciando o formulário -->

        <form action="https://formspree.io/f/mjvjllre" method="post" id="my-form">
            <div>
                <label for="none">Nome</label>
                <input type="text" name="none" id="none" required>
                
            </div>

            <div>
                <label for="email">E-mail</label>
                <input type="email" name="email" id="email" required>
            </div>

            <div>
                <label for="data">Data de Nascimento</label>
                <input type="date" name="data" id="data">
            </div>

            <div>
                <label for="telefone">Telefone</label>
                <input type="tel" name="telefone" id="telefone" placeholder="Digite apenas números, incluindo DDD">
            </div>

            <div>
                <label for="idade">Idade</label>
                <input type="number" name="idade" id="idade" id="idade" min="18" max="120">
            </div>

            <div>
                <p>Gênero</p>
                <input type="radio" name="genero" id="masculino" value="masculino">
                <label for="masculino">Masculino</label>

                <input type="radio" name="genero" id="feminino" value="feminino">
                <label for="feminino">Feminino</label>

                <input type="radio" name="genero" id="outros" value="outros">
                <label for="outros">Outros</label>     
            </div>

            <div>
                <p>Interesses:</p>
                <input type="checkbox" name="interesses" id="design" value="design">
                <label for="design">Design</label>

                <input type="checkbox" name="interesses" id="marketing" value="marketing">
                <label for="marketing">Marketing</label>

                <input type="checkbox" name="interesses" id="programacao" value="programacao">
                <label for="programacao">Programação</label>
            </div>

            <div>
                <label for="cep">CEP:</label>
                <input type="text" name="cep" id="cep" maxlength="9" required>  
                <b id="status"></b>
            </div>

            <div>
                <label for="endereco">Endereço</label>
                <input type="text" name="endereco" id="endereco" size="30">
            </div>

            <div>
                <label for="bairro">Bairro</label>
                <input type="text" name="bairro" id="bairro">
            </div>

            <div>
                <label for="cidade">Cidade</label>
                <input type="text" name="cidade" id="cidade">
            </div>

            <div>
                <label for="estado">Estado</label>
                <input type="text" name="estado" id="estado">
            </div>

            <div>
                <label for="assunto">Assunto</label>
                <select name="assunto" id="assunto">
                    <option></option>
                    <option>Dúvidas</option>
                    <option>Elogios</option>
                    <option>Reclamações</option>
                    <option>Outros</option>
                </select>
            </div>

            <div>
                <label for="mensagem">Mensagem:
                    <span id="maximo">(resta <b id="caracteres">100</b> caracteres)</span>
                </label><br>
                <textarea name="mensagem" id="mensagem" cols="20" rows="15" maxlength="100"></textarea>
            </div>

            <button type="submit" id="my-form-status"> Enviar dados</button>
            <p id="my-form-status"></p>
        </form>

         </article>

    </main>
    <!-- /fim do main -->


    <!-- rodapé/parte inferior -->
    <footer>
        <p>Simplicity é um site fictício desenvolvido por Chapolin Colorado - Senac Penha &copy; 2021</p>
    </footer> <!-- /fim footer -->

<script src="js/menu.js"></script>

<!-- Linkando para o Vanilla Masker -->
<script src="js/vanilla-masker.min.js"></script>


<!-- Mascarando o campo telefone -->
<script>

    VMasker(document.querySelector("#cep")).maskPattern("99999-999");
    
    function inputHandler(masks, max, event) {
  var c = event.target;
  var v = c.value.replace(/\D/g, '');
  var m = c.value.length > max ? 1 : 0;
  VMasker(c).unMask();
  VMasker(c).maskPattern(masks[m]);
  c.value = VMasker.toPattern(v, masks[m]);
}

  var telMask = ['(99) 9999-99999', '(99) 99999-9999'];
  var tel = document.querySelector('#telefone');
  VMasker(tel).maskPattern(telMask[0]);
  tel.addEventListener('input', inputHandler.bind(undefined, telMask, 14), false);

</script>

    <!--Utilizando o Webservice VIACEP  - https://viacep.com.br - para preencher o formulário a partir do CEP -->

    <!-- /* Referenciando Biblioteca Jquery 3.6 *
    Importante: sempre que carregar um pligun que usa Jquery, a primeira a ser carregada é a biblioteca Jquery, do contrário o plugin não funcionará / -->

  <script src="plugins/jquery-3.6.0.min.js"></script>

  <script>

    $(document).ready(function() {

        function limpa_formulário_cep() {
            // Limpa valores do formulário de cep.
            $("#endereco").val("");
            $("#bairro").val("");
            $("#cidade").val("");
            $("#estado").val("");
        }
        
        //Quando o campo cep perde o foco.
        $("#cep").blur(function() {

            //Nova variável "cep" somente com dígitos.
            var cep = $(this).val().replace(/\D/g, '');

            //Verifica se campo cep possui valor informado.
            if (cep != "") {

                //Expressão regular para validar o CEP.
                var validacep = /^[0-9]{8}$/;

                //Valida o formato do CEP.
                if(validacep.test(cep)) {

                    //Preenche os campos com "..." enquanto consulta webservice.
                    $("#endereco").val("...");
                    $("#bairro").val("...");
                    $("#cidade").val("...");
                    $("#estado").val("...");
                    $("#status").text("CEP encontrado");

                    //Consulta o webservice viacep.com.br/
                    $.getJSON("https://viacep.com.br/ws/"+ cep +"/json/?callback=?", function(dados) {

                        if (!("erro" in dados)) {
                            //Atualiza os campos com os valores da consulta.
                            $("#endereco").val(dados.logradouro);
                            $("#bairro").val(dados.bairro);
                            $("#cidade").val(dados.localidade);
                            $("#estado").val(dados.uf);
            
                        } //end if.
                        else {
                            //CEP pesquisado não foi encontrado.
                            limpa_formulário_cep();
                            $("#status").text("CEP não encontrado.").css("color","red")
                        }
                    });
                } //end if.
                else {
                    //cep é inválido.
                    limpa_formulário_cep();
                    $("#status").text("Formato de CEP inválido.").css("color","red")
                }
            } //end if.
            else {
                //cep sem valor, limpa formulário.
                limpa_formulário_cep();
            }
        });
    });

</script>

<!-- Contador de caracteres do campo de mensagem do formulário -->
<script>

    /* Selecionar os elementos que serão utilizados */
    const spanMaximo = $("#maximo");
    const bCaracteres = $("#caracteres");
    const textMensagem = $("#mensagem")

    /* Determinando a quantidade de caracteres */
    let quantidade = 100;

    /* Ouvinte de evento */
    textMensagem.on("input", function(){

        /* Capturando o que for digitado */
        let conteudo = textMensagem.val();

        /* Criando a contagem regressiva */
        let contagem = quantidade - conteudo.length;

        /* Exibindo o número no HTML */
        bCaracteres.text(contagem);

        if (contagem == 0 ){
            spanMaximo.css("color", "red");
            spanMaximo.text("Limite de caracteres alcançado");
        } else {
            spanMaximo.css("color", "black");
            spanMaximo.html("resta <b id='caracteres'>" +contagem+ "</b> caracteres)");
        }
    })

</script>

<!-- Formpree - script para envio de formulário -->

<script>
    var form = document.getElementById("my-form");
    
    async function handleSubmit(event) {
      event.preventDefault();
      var status = document.getElementById("my-form-status");
      var data = new FormData(event.target);
      fetch(event.target.action, {
        method: form.method,
        body: data,
        headers: {
            'Accept': 'application/json'
        }
      }).then(response => {
        status.innerHTML = "Mensagem enviada com sucesso, obrigado!";
        form.reset()
      }).catch(error => {
        status.innerHTML = "Oops! Encontramos um problema, revise as informações e envie novamente."
      });
    }
    form.addEventListener("submit", handleSubmit)
</script>

</body>
</html>

